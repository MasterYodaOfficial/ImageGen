# TODO.md

## Техническое задание на разработку Telegram-бота для генерации изображений

### 1. Основные функции
- [x] **Генерация изображений**
  - [x] Интеграция с API (Stable Diffusion / DALL·E / Kandinsky)
  - [x] Обработка текстовых запросов (prompt)
  - [x] Настройки генерации (стиль, разрешение, количество вариантов)
  - [x] Лимиты на бесплатные запросы (3 генерации для пробного периода)

- [x] **Система подписок**
  - [x] Тарифы (например, 1000₽/мес — N генераций в день)
  - [x] Бесплатный пробный период
  - [x] Уведомления о продлении подписки
  - [x] Автоплатежи (если возможно)

- [x] **Управление аккаунтом**
  - [x] Личный кабинет (`/profile`)
    - [x] Статистика (остаток генераций)
    - [x] История запросов (10-20 последних изображений)
  - [x] Команда `/buy` для выбора тарифа

- [x] **Реферальная система**
  - [x] Бонусы за приглашенных друзей (например, +5 генераций)
  - [x] Уникальные реферальные ссылки

- [x] **Модерация контента**
  - [x] Фильтр запрещенных запросов (NSFW, насилие и т. д.)
  - [x] Автоматическая проверка изображений (NSFW-детектор)

- [x] **Платежи**
  - [x] Интеграция с платежными системами (ЮKassa, Qiwi, Crypto)
  - [x] Уведомления об оплате и статусе подписки

---

### 2. Технические требования
- [x] **Стек технологий**
  - [x] Язык: Python (aiogram) или Node.js (telegraf)
  - [x] БД: PostgreSQL / SQLite / Firebase
  - [x] Хостинг: VPS (Hetzner, Selectel) или облако (AWS, Google Cloud)

- [x] **Интеграции**
  - [x] Платежные системы: Stripe, ЮKassa, Crypto (USDT)
  - [x] Анти-спам: капча или лимиты запросов
  - [x] Логирование ошибок и действий пользователей

---

### 3. Интерфейс (UX/UI)
- [x] **Команды**
  - [x] `/start` — приветствие и инструкция
  - [x] `/generate` — ввод запроса
  - [x] `/buy` — выбор тарифа
  - [x] `/profile` — статистика и настройки

- [x] **Кнопки**
  - [x] Inline-кнопки для быстрых действий ("Улучшить качество", "Скачать", "Купить подписку")
  - [x] Выбор стиля генерации

- [x] **Дизайн**
  - [x] Минималистичные сообщения
  - [x] Пример диалога (см. ТЗ)

---

### 4. Безопасность
- [x] Защита от DDoS (лимиты запросов с аккаунта)
- [x] Шифрование платежей (SSL, безопасное хранение данных)
- [x] Резервное копирование БД (ежедневное)

---

### 5. Этапы разработки
#### Прототип (1-2 недели)
- [x] Бот принимает запрос и возвращает рандомную картинку (без реальной генерации)
- [x] База данных для пользователей

#### MVP (3-4 недели)
- [x] Реальная генерация через API
- [x] Простая система подписки (ручная проверка платежей)

#### Финальная версия (1-2 месяца)
- [x] Автоматические платежи
- [x] Реферальная система
- [x] Модерация контента
