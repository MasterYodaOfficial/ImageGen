# TODO.md

## Техническое задание на разработку Telegram-бота для генерации изображений

### 1. Основные функции
- [ ] **Генерация изображений**
  - [ ] Интеграция с API (Stable Diffusion / DALL·E / Kandinsky)
  - [ ] Обработка текстовых запросов (prompt)
  - [ ] Настройки генерации (стиль, разрешение, количество вариантов)
  - [ ] Лимиты на бесплатные запросы (3 генерации для пробного периода)

- [ ] **Система подписок**
  - [ ] Тарифы (например, 1000₽/мес — N генераций в день)
  - [ ] Бесплатный пробный период
  - [ ] Уведомления о продлении подписки
  - [ ] Автоплатежи (если возможно)

- [ ] **Управление аккаунтом**
  - [ ] Личный кабинет (`/profile`)
    - [ ] Статистика (остаток генераций)
    - [ ] История запросов (10-20 последних изображений)
  - [ ] Команда `/buy` для выбора тарифа

- [ ] **Реферальная система**
  - [ ] Бонусы за приглашенных друзей (например, +5 генераций)
  - [ ] Уникальные реферальные ссылки

- [ ] **Модерация контента**
  - [ ] Фильтр запрещенных запросов (NSFW, насилие и т. д.)
  - [ ] Автоматическая проверка изображений (NSFW-детектор)

- [ ] **Платежи**
  - [ ] Интеграция с платежными системами (ЮKassa, Qiwi, Crypto)
  - [ ] Уведомления об оплате и статусе подписки

---

### 2. Технические требования
- [ ] **Стек технологий**
  - [ ] Язык: Python (aiogram) или Node.js (telegraf)
  - [ ] БД: PostgreSQL / SQLite / Firebase
  - [ ] Хостинг: VPS (Hetzner, Selectel) или облако (AWS, Google Cloud)

- [ ] **Интеграции**
  - [ ] Платежные системы: Stripe, ЮKassa, Crypto (USDT)
  - [ ] Анти-спам: капча или лимиты запросов
  - [ ] Логирование ошибок и действий пользователей

---

### 3. Интерфейс (UX/UI)
- [ ] **Команды**
  - [ ] `/start` — приветствие и инструкция
  - [ ] `/generate` — ввод запроса
  - [ ] `/buy` — выбор тарифа
  - [ ] `/profile` — статистика и настройки

- [ ] **Кнопки**
  - [ ] Inline-кнопки для быстрых действий ("Улучшить качество", "Скачать", "Купить подписку")
  - [ ] Выбор стиля генерации

- [ ] **Дизайн**
  - [ ] Минималистичные сообщения
  - [ ] Пример диалога (см. ТЗ)

---

### 4. Безопасность
- [ ] Защита от DDoS (лимиты запросов с аккаунта)
- [ ] Шифрование платежей (SSL, безопасное хранение данных)
- [ ] Резервное копирование БД (ежедневное)

---

### 5. Этапы разработки
#### Прототип (1-2 недели)
- [ ] Бот принимает запрос и возвращает рандомную картинку (без реальной генерации)
- [ ] База данных для пользователей

#### MVP (3-4 недели)
- [ ] Реальная генерация через API
- [ ] Простая система подписки (ручная проверка платежей)

#### Финальная версия (1-2 месяца)
- [ ] Автоматические платежи
- [ ] Реферальная система
- [ ] Модерация контента